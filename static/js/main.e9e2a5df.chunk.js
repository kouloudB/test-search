(this["webpackJsonpsoe-codebase"]=this["webpackJsonpsoe-codebase"]||[]).push([[0],{113:function(e,n,t){"use strict";t.r(n);var c=t(3),o=t(0),r=t(20),a=t.n(r),i=(t(62),t(25)),s=t(2),u=t(15),l=t.n(u),d=t(21),f=t(55),h=t(16),v="GET_ACCOUNTS",p="Offline/STATUS_CHANGED",j="ACCOUNT_SEARCH_ONLINE",b="ACCOUNT_SEARCH_OFFLINE",O=function(e,n,t){return function(n){fetch(e).then((function(e){return e.json()})).then((function(e){var c=e.results;n({type:t,payload:c})}))}},g=function(e,n,t,c){return function(){var o=Object(d.a)(l.a.mark((function o(r){return l.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,caches.open(n);case 2:o.sent.match(t).then((function(n){return null===n||void 0===n?void 0:n.json().then((function(n){var t=n.results.filter((function(n){return n.city.includes(e)}));r({type:c,payload:t})}))}));case 4:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},w="https://api.fda.gov/food/enforcement.json?limit=1000";var m=function(){var e=Object(h.c)((function(e){return e.accountsReducer.accounts})),n=Object(h.c)((function(e){return e.accountsReducer.isConnected})),t=Object(h.b)(),r=Object(o.useState)(""),a=Object(f.a)(r,2),i=a[0],s=a[1],u=function(){var e=Object(d.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.next=3,caches.open("accounts-cache");case 3:e.sent.match(w).then((function(e){return s(void 0==e?"undefined":"online data"+(null===e||void 0===e?void 0:e.toString())),null===e||void 0===e?void 0:e.json().then((function(e){e.results}))})),t(O(w,c.target.value,j)),console.log(">>> from API"),e.next=15;break;case 9:return e.next=11,caches.open("accounts-cache");case 11:e.sent.match(w).then((function(e){return s(void 0==e?"undefined":"offline data"+(null===e||void 0===e?void 0:e.toString())),null===e||void 0===e?void 0:e.json().then((function(e){e.results}))})),t(g(c.target.value,"accounts-cache",w,b)),console.log(">>> from CACHE");case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){t({type:"GET_ACCOUNTS",payload:[],meta:{offline:{effect:{url:w,method:"GET"},commit:{type:v,meta:{}}}}})}),[]),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100vw",flexDirection:"column"},children:[Object(c.jsx)("p",{children:n?"online":"offline"}),Object(c.jsx)("p",{children:"consCach  "+i}),Object(c.jsx)("input",{type:"text",onChange:u}),Object(c.jsx)("ul",{children:e.map((function(e,n){var t=e.city;return Object(c.jsx)("li",{children:t},n)}))})]})};var x=function(){var e=Object(s.f)();return Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){e.push("/home")},children:"Login"})})};var y=function(){return Object(c.jsx)(i.a,{children:Object(c.jsx)("div",{children:Object(c.jsxs)(s.c,{children:[Object(c.jsx)(s.a,{path:"/home",component:m}),Object(c.jsx)(s.a,{path:"/",component:x})]})})})},C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var E=t(56),S=t(8),A=t(10),T=t(54),N=t(48),U={accounts:[],id:"",isConnected:!0};var W=Object(A.combineReducers)({accountsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:case j:return Object(S.a)(Object(S.a)({},e),{},{accounts:n.payload,isConnected:!0});case b:return Object(S.a)(Object(S.a)({},e),{},{accounts:n.payload});case p:return Object(S.a)(Object(S.a)({},e),{},{isConnected:n.payload.online});default:return e}}}),R=t(49),_=t.n(R),I=t(50),L=t.n(I),G=t(51),H=t(26),P=t.n(H),B=[Object(T.a)(),N.a,_.a],D=(Object(S.a)(Object(S.a)({},P.a),{},{discard:function(e,n,t){var c=e.response;return c&&c.status>=400||t>10}}),{effect:function(e,n){console.log("Executing effect for ".concat(n.type));var t=e.url,c=Object(E.a)(e,["url"]);return L()(Object(S.a)({url:t},c)).then((function(e){return Promise.resolve(e.data.results)})).catch((function(e){throw e}))}}),F=Object(A.createStore)(W,Object(A.compose)(A.applyMiddleware.apply(void 0,B),Object(G.offline)(D)));a.a.render(Object(c.jsx)(h.a,{store:F,children:Object(c.jsx)(y,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/test-search",window.location.href).origin!==window.location.origin)return void console.log("2");window.addEventListener("load",(function(){var n="".concat("/test-search","/service-worker.js");C?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):k(n,e)}))}}()},62:function(e,n,t){}},[[113,1,2]]]);
//# sourceMappingURL=main.e9e2a5df.chunk.js.map